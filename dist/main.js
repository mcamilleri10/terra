!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/dist/",e(e.s=142)}({141:function(t,n,e){},142:function(t,n,e){"use strict";e.r(n);e(141);var r=function(t){var n=document.querySelector(".indicator-info");switch(n.classList.remove("red"),n.innerHTML="",t){case"loading":n.innerHTML='<i class="fas fa-circle-notch fa-spin"></i>';break;case"average_high_temperature":n.innerHTML="Average High Temperature is calculated by aggregating daily average high   temperatures. It is an appropriate metric for probable long term temperature trends.";break;case"average_low_temperature":n.innerHTML="Average Low Temperature is calculated by aggregating daily average low temperatures. It is an appropriate metric for probable long term temperature trends.";break;case"total_precipitation":n.innerHTML="Total Precipitation returns the summed precipitation volume ranging the user-specified period of time. It is an appropriate first-pass metric for probable long term precipitation trends. Total precipitation is broad because it waters down information on precipitation event intensity, particularly the longer the period of time.";break;case"extreme_precipitation_events":n.innerHTML="Extreme Precipitation Events counts the number of times total daily precipitation exceeds the specified percentile of total historic daily precipitation. The percentile defaults to 99. This indicator is useful to understand future heavy precipitation and inform resource planners of changes to prepare for.";break;case"extreme_cold_events":n.innerHTML="Extreme Cold Events counts the total times the daily average minimum temperature is below some percentile of historic observations. The percentile defaults to 1, referring to the coldest percentile of historic daily temperatures. It is an appropriate indicator for understanding deviations from normal climatic extremes.";break;case"extreme_heat_events":n.innerHTML="Extreme Heat Events counts the total times the daily average maximum temperature is above some percentile of historic observations. The percentile defaults to 99, referring to the hottest percentile of historic daily temperatures. It is an appropriate indicator for understanding deviations from normal climatic extremes.";break;case"heat_wave_incidents":n.innerHTML="Heat Wave Incidents counts the days the daily high temperature exceeds 5˚C above historic average high temperature norms for at least 5 consecutive days. This indicator is closely paired with heat wave duration index and, similarly, provides a concrete and palpable metric to the impacts of global warming. Frequency, duration, and intensity predictions of heat waves are very important for health and emergency services planning.";break;case"heat_wave_duration_index":n.innerHTML="The Heat Wave Duration Index (HWDI) measures the maximum period of at least 5 consecutive days with daily high temperature greater than 5˚C above historic average high temperature norms. If the historic norm was 85˚F, a period of 6 consecutive days with maximum daily temperatures above 94˚F (5˚C = 9˚F) would register at 1 on the HWDI. This indicator provides a more specific and nuanced look at the extent and intensity of warming than average high temperature or even extreme heat events. It is closely related to heat wave incidents.";break;case"dry_spells":n.innerHTML="Dry Spells counts the total number of times per user-specified period that there are 5 or more consecutive days without precipitation. This indicator is useful to understand future drought patterns and inform resource planners of changes to prepare for.";break;case"diurnal_temperature_range":n.innerHTML="Diurnal Temperature Range (DTR) is the average difference between the maximum temperature and minimum temperature in a day. It measures how much it heats or cools in a day. A decreasing DTR suggests a warming climatic trend but is only a rough measure as DTR can be skewed by many factors such as cloud cover, urban heat island effect, and aerosols.";break;case"frost_days":n.innerHTML="Frost Days reports the number of days where the daily low temperature drops below 32˚F or 0˚C. The presence of, lack of, and schedule of frost days have strong impacts on growing seasons, permafrost, and heating demands, for example. While the freezing point of water varies slightly with local environmental conditions, for simplicity this indicator assumes a consistent 32˚F/0˚C.";break;case"max_high_temperature":n.innerHTML="Max High Temperature reports the highest daily temperature generated across all requested models for the given period. While averages or percentiles may be more dependable measurements of regular climatic conditions, gauging potentially new maximum heat extremes is essential for proper emergency services preparation.";break;case"min_low_temperature":n.innerHTML="Min Low Temperature reports the lowest daily temperature generated across all requested models for the given period. While averages or percentiles may be more dependable measurements of regular climatic conditions, gauging potentially new minimum temperature extremes is essential for gauging the changing climate.";break;default:n.innerHTML=""}},i=function(){var t=document.querySelector(".indicator-info"),n=document.querySelector("#submit");t.innerHTML="Please select a city and indicator.",t.classList.add("red"),n.disabled=!1},a={headers:{Authorization:"Token ".concat("c2a99914a02440b74bd7b65929392687a2e1c42e")}},o=function(t,n,e){return fetch("https://app.climate.azavea.com/api/climate-data/".concat(t,"/").concat(n,"/indicator/").concat(e,"/"),a).then((function(t){return t.json()})).then((function(t){return t}))};var u=Array.prototype.slice,s=function(t){return t};function c(t){return"translate("+(t+.5)+",0)"}function l(t){return"translate(0,"+(t+.5)+")"}function h(t){return n=>+t(n)}function f(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}function p(){return!this.__axis}function d(t,n){var e=[],r=null,i=null,a=6,o=6,d=3,m=1===t||4===t?-1:1,g=4===t||2===t?"x":"y",v=1===t||3===t?c:l;function y(u){var c=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,l=null==i?n.tickFormat?n.tickFormat.apply(n,e):s:i,y=Math.max(a,0)+d,_=n.range(),w=+_[0]+.5,b=+_[_.length-1]+.5,x=(n.bandwidth?f:h)(n.copy()),M=u.selection?u.selection():u,k=M.selectAll(".domain").data([null]),A=M.selectAll(".tick").data(c,n).order(),N=A.exit(),S=A.enter().append("g").attr("class","tick"),E=A.select("line"),T=A.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(S),E=E.merge(S.append("line").attr("stroke","currentColor").attr(g+"2",m*a)),T=T.merge(S.append("text").attr("fill","currentColor").attr(g,m*y).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),u!==M&&(k=k.transition(u),A=A.transition(u),E=E.transition(u),T=T.transition(u),N=N.transition(u).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=x(t))?v(t):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(t){var n=this.parentNode.__axis;return v(n&&isFinite(n=n(t))?n:x(t))}))),N.remove(),k.attr("d",4===t||2==t?o?"M"+m*o+","+w+"H0.5V"+b+"H"+m*o:"M0.5,"+w+"V"+b:o?"M"+w+","+m*o+"V0.5H"+b+"V"+m*o:"M"+w+",0.5H"+b),A.attr("opacity",1).attr("transform",(function(t){return v(x(t))})),E.attr(g+"2",m*a),T.attr(g,m*y).text(l),M.filter(p).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),M.each((function(){this.__axis=x}))}return y.scale=function(t){return arguments.length?(n=t,y):n},y.ticks=function(){return e=u.call(arguments),y},y.tickArguments=function(t){return arguments.length?(e=null==t?[]:u.call(t),y):e.slice()},y.tickValues=function(t){return arguments.length?(r=null==t?null:u.call(t),y):r&&r.slice()},y.tickFormat=function(t){return arguments.length?(i=t,y):i},y.tickSize=function(t){return arguments.length?(a=o=+t,y):a},y.tickSizeInner=function(t){return arguments.length?(a=+t,y):a},y.tickSizeOuter=function(t){return arguments.length?(o=+t,y):o},y.tickPadding=function(t){return arguments.length?(d=+t,y):d},y}var m={value:()=>{}};function g(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new v(r)}function v(t){this._=t}function y(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function _(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function w(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=m,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}v.prototype=g.prototype={constructor:v,on:function(t,n){var e,r=this._,i=y(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<o;)if(e=(t=i[a]).type)r[e]=w(r[e],t.name,n);else if(null==n)for(e in r)r[e]=w(r[e],t.name,null);return this}for(;++a<o;)if((e=(t=i[a]).type)&&(e=_(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new v(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,e=(r=this._[t]).length;a<e;++a)r[a].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};var b=g;function x(){}var M=function(t){return null==t?x:function(){return this.querySelector(t)}},k=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)};function A(){return[]}var N=function(t){return null==t?A:function(){return this.querySelectorAll(t)}};var S=function(t){return function(){return this.matches(t)}};function E(t){return function(n){return n.matches(t)}}var T=Array.prototype.find;function L(){return this.firstElementChild}var H=Array.prototype.filter;function C(){return this.children}var q=function(t){return new Array(t.length)};function j(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}j.prototype={constructor:j,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var P=function(t){return function(){return t}};function O(t,n,e,r,i,a){for(var o,u=0,s=n.length,c=a.length;u<c;++u)(o=n[u])?(o.__data__=a[u],r[u]=o):e[u]=new j(t,a[u]);for(;u<s;++u)(o=n[u])&&(i[u]=o)}function D(t,n,e,r,i,a,o){var u,s,c,l=new Map,h=n.length,f=a.length,p=new Array(h);for(u=0;u<h;++u)(s=n[u])&&(p[u]=c=o.call(s,s.__data__,u,n)+"",l.has(c)?i[u]=s:l.set(c,s));for(u=0;u<f;++u)c=o.call(t,a[u],u,a)+"",(s=l.get(c))?(r[u]=s,s.__data__=a[u],l.delete(c)):e[u]=new j(t,a[u]);for(u=0;u<h;++u)(s=n[u])&&l.get(p[u])===s&&(i[u]=s)}function I(t){return t.__data__}function R(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var z="http://www.w3.org/1999/xhtml",F={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),F.hasOwnProperty(n)?{space:F[n],local:t}:t};function Y(t){return function(){this.removeAttribute(t)}}function $(t){return function(){this.removeAttributeNS(t.space,t.local)}}function V(t,n){return function(){this.setAttribute(t,n)}}function B(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function W(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function U(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}var Q=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Z(t){return function(){this.style.removeProperty(t)}}function G(t,n,e){return function(){this.style.setProperty(t,n,e)}}function K(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function J(t,n){return t.style.getPropertyValue(n)||Q(t).getComputedStyle(t,null).getPropertyValue(n)}function tt(t){return function(){delete this[t]}}function nt(t,n){return function(){this[t]=n}}function et(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function rt(t){return t.trim().split(/^|\s+/)}function it(t){return t.classList||new at(t)}function at(t){this._node=t,this._names=rt(t.getAttribute("class")||"")}function ot(t,n){for(var e=it(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function ut(t,n){for(var e=it(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function st(t){return function(){ot(this,t)}}function ct(t){return function(){ut(this,t)}}function lt(t,n){return function(){(n.apply(this,arguments)?ot:ut)(this,t)}}at.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ht(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function pt(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function dt(){this.innerHTML=""}function mt(t){return function(){this.innerHTML=t}}function gt(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function vt(){this.nextSibling&&this.parentNode.appendChild(this)}function yt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _t(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===z&&n.documentElement.namespaceURI===z?n.createElement(t):n.createElementNS(e,t)}}function wt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var bt=function(t){var n=X(t);return(n.local?wt:_t)(n)};function xt(){return null}function Mt(){var t=this.parentNode;t&&t.removeChild(this)}function kt(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function At(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Nt(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function St(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,a=n.length;r<a;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Et(t,n,e){return function(){var r,i=this.__on,a=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var o=0,u=i.length;o<u;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=e),void(r.value=n);this.addEventListener(t.type,a,e),r={type:t.type,name:t.name,value:n,listener:a,options:e},i?i.push(r):this.__on=[r]}}function Tt(t,n,e){var r=Q(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Lt(t,n){return function(){return Tt(this,t,n)}}function Ht(t,n){return function(){return Tt(this,t,n.apply(this,arguments))}}var Ct=[null];function qt(t,n){this._groups=t,this._parents=n}function jt(){return new qt([[document.documentElement]],Ct)}qt.prototype=jt.prototype={constructor:qt,select:function(t){"function"!=typeof t&&(t=M(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o,u=n[i],s=u.length,c=r[i]=new Array(s),l=0;l<s;++l)(a=u[l])&&(o=t.call(a,a.__data__,l,u))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new qt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);return null==n?[]:k(n)}}(t):N(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o,u=n[a],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(t.call(o,o.__data__,c,u)),i.push(o));return new qt(r,i)},selectChild:function(t){return this.select(null==t?L:function(t){return function(){return T.call(this.children,t)}}("function"==typeof t?t:E(t)))},selectChildren:function(t){return this.selectAll(null==t?C:function(t){return function(){return H.call(this.children,t)}}("function"==typeof t?t:E(t)))},filter:function(t){"function"!=typeof t&&(t=S(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],u=o.length,s=r[i]=[],c=0;c<u;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&s.push(a);return new qt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,I);var e=n?D:O,r=this._parents,i=this._groups;"function"!=typeof t&&(t=P(t));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var l=r[c],h=i[c],f=h.length,p=k(t.call(l,l&&l.__data__,c,r)),d=p.length,m=u[c]=new Array(d),g=o[c]=new Array(d),v=s[c]=new Array(f);e(l,h,m,g,v,p,n);for(var y,_,w=0,b=0;w<d;++w)if(y=m[w]){for(w>=b&&(b=w+1);!(_=g[b])&&++b<d;);y._next=_||null}}return(o=new qt(o,r))._enter=u,o._exit=s,o},enter:function(){return new qt(this._enter||this._groups.map(q),this._parents)},exit:function(){return new qt(this._exit||this._groups.map(q),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?a.remove():e(a),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof qt))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s,c=n[u],l=e[u],h=c.length,f=o[u]=new Array(h),p=0;p<h;++p)(s=c[p]||l[p])&&(f[p]=s);for(;u<r;++u)o[u]=n[u];return new qt(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=R);for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o,u=e[a],s=u.length,c=i[a]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(n)}return new qt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,a=n[e],o=0,u=a.length;o<u;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,n){var e=X(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?$:Y:"function"==typeof n?e.local?U:W:e.local?B:V)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?Z:"function"==typeof n?K:G)(t,n,null==e?"":e)):J(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?tt:"function"==typeof n?et:nt)(t,n)):this.node()[t]},classed:function(t,n){var e=rt(t+"");if(arguments.length<2){for(var r=it(this.node()),i=-1,a=e.length;++i<a;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?lt:n?st:ct)(e,n))},text:function(t){return arguments.length?this.each(null==t?ht:("function"==typeof t?pt:ft)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?dt:("function"==typeof t?gt:mt)(t)):this.node().innerHTML},raise:function(){return this.each(vt)},lower:function(){return this.each(yt)},append:function(t){var n="function"==typeof t?t:bt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:bt(t),r=null==n?xt:"function"==typeof n?n:M(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Mt)},clone:function(t){return this.select(t?At:kt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,a=Nt(t+""),o=a.length;if(!(arguments.length<2)){for(u=n?Et:St,r=0;r<o;++r)this.each(u(a[r],n,e));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?Ht:Lt)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};var Pt=jt,Ot=function(t){return"string"==typeof t?new qt([[document.querySelector(t)]],[document.documentElement]):new qt([[t]],Ct)};var Dt=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t};function It(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Rt(){}var zt="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yt=/^#([0-9a-f]{3,8})$/,$t=new RegExp("^rgb\\("+[zt,zt,zt]+"\\)$"),Vt=new RegExp("^rgb\\("+[Xt,Xt,Xt]+"\\)$"),Bt=new RegExp("^rgba\\("+[zt,zt,zt,Ft]+"\\)$"),Wt=new RegExp("^rgba\\("+[Xt,Xt,Xt,Ft]+"\\)$"),Ut=new RegExp("^hsl\\("+[Ft,Xt,Xt]+"\\)$"),Qt=new RegExp("^hsla\\("+[Ft,Xt,Xt,Ft]+"\\)$"),Zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gt(){return this.rgb().formatHex()}function Kt(){return this.rgb().formatRgb()}function Jt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Yt.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?tn(n):3===e?new an(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?nn(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?nn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=$t.exec(t))?new an(n[1],n[2],n[3],1):(n=Vt.exec(t))?new an(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Bt.exec(t))?nn(n[1],n[2],n[3],n[4]):(n=Wt.exec(t))?nn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Ut.exec(t))?cn(n[1],n[2]/100,n[3]/100,1):(n=Qt.exec(t))?cn(n[1],n[2]/100,n[3]/100,n[4]):Zt.hasOwnProperty(t)?tn(Zt[t]):"transparent"===t?new an(NaN,NaN,NaN,0):null}function tn(t){return new an(t>>16&255,t>>8&255,255&t,1)}function nn(t,n,e,r){return r<=0&&(t=n=e=NaN),new an(t,n,e,r)}function en(t){return t instanceof Rt||(t=Jt(t)),t?new an((t=t.rgb()).r,t.g,t.b,t.opacity):new an}function rn(t,n,e,r){return 1===arguments.length?en(t):new an(t,n,e,null==r?1:r)}function an(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function on(){return"#"+sn(this.r)+sn(this.g)+sn(this.b)}function un(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function sn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function cn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new hn(t,n,e,r)}function ln(t){if(t instanceof hn)return new hn(t.h,t.s,t.l,t.opacity);if(t instanceof Rt||(t=Jt(t)),!t)return new hn;if(t instanceof hn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=n===a?(e-r)/u+6*(e<r):e===a?(r-n)/u+2:(n-e)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new hn(o,u,s,t.opacity)}function hn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function fn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function pn(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}Dt(Rt,Jt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Gt,formatHex:Gt,formatHsl:function(){return ln(this).formatHsl()},formatRgb:Kt,toString:Kt}),Dt(an,rn,It(Rt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:on,formatHex:on,formatRgb:un,toString:un})),Dt(hn,(function(t,n,e,r){return 1===arguments.length?ln(t):new hn(t,n,e,null==r?1:r)}),It(Rt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new hn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new hn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new an(fn(t>=240?t-240:t+120,i,r),fn(t,i,r),fn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var dn=t=>()=>t;function mn(t,n){return function(e){return t+e*n}}function gn(t){return 1==(t=+t)?vn:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):dn(isNaN(n)?e:n)}}function vn(t,n){var e=n-t;return e?mn(t,e):dn(isNaN(t)?n:t)}var yn=function t(n){var e=gn(n);function r(t,n){var r=e((t=rn(t)).r,(n=rn(n)).r),i=e(t.g,n.g),a=e(t.b,n.b),o=vn(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=a(n),t.opacity=o(n),t+""}}return r.gamma=t,r}(1);function _n(t){return function(n){var e,r,i=n.length,a=new Array(i),o=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=rn(n[e]),a[e]=r.r||0,o[e]=r.g||0,u[e]=r.b||0;return a=t(a),o=t(o),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=u(t),r+""}}}_n((function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,u=r<n-1?t[r+2]:2*a-i;return pn((e-r/n)*n,o,i,a,u)}})),_n((function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],a=t[r%n],o=t[(r+1)%n],u=t[(r+2)%n];return pn((e-r/n)*n,i,a,o,u)}}));var wn=function(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(a){for(e=0;e<r;++e)i[e]=t[e]*(1-a)+n[e]*a;return i}};function bn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xn(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(e=0;e<i;++e)a[e]=Hn(t[e],n[e]);for(;e<r;++e)o[e]=n[e];return function(t){for(e=0;e<i;++e)o[e]=a[e](t);return o}}var Mn=function(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}},kn=function(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}},An=function(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Hn(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},Nn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(Nn.source,"g");var En,Tn,Ln=function(t,n){var e,r,i,a=Nn.lastIndex=Sn.lastIndex=0,o=-1,u=[],s=[];for(t+="",n+="";(e=Nn.exec(t))&&(r=Sn.exec(n));)(i=r.index)>a&&(i=n.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(e=e[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:kn(e,r)})),a=Sn.lastIndex;return a<n.length&&(i=n.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?function(t){return function(n){return t(n)+""}}(s[0].x):function(t){return function(){return t}}(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})},Hn=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?dn(n):("number"===r?kn:"string"===r?(e=Jt(n))?(n=e,yn):Ln:n instanceof Jt?yn:n instanceof Date?Mn:bn(n)?wn:Array.isArray(n)?xn:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?An:kn)(t,n)},Cn=0,qn=0,jn=0,Pn=0,On=0,Dn=0,In="object"==typeof performance&&performance.now?performance:Date,Rn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function zn(){return On||(Rn(Fn),On=In.now()+Dn)}function Fn(){On=0}function Xn(){this._call=this._time=this._next=null}function Yn(t,n,e){var r=new Xn;return r.restart(t,n,e),r}function $n(){On=(Pn=In.now())+Dn,Cn=qn=0;try{!function(){zn(),++Cn;for(var t,n=En;n;)(t=On-n._time)>=0&&n._call.call(null,t),n=n._next;--Cn}()}finally{Cn=0,function(){var t,n,e=En,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:En=n);Tn=t,Bn(r)}(),On=0}}function Vn(){var t=In.now(),n=t-Pn;n>1e3&&(Dn-=n,Pn=t)}function Bn(t){Cn||(qn&&(qn=clearTimeout(qn)),t-On>24?(t<1/0&&(qn=setTimeout($n,t-In.now()-Dn)),jn&&(jn=clearInterval(jn))):(jn||(Pn=In.now(),jn=setInterval(Vn,1e3)),Cn=1,Rn($n)))}Xn.prototype=Yn.prototype={constructor:Xn,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?zn():+e)+(null==n?0:+n),this._next||Tn===this||(Tn?Tn._next=this:En=this,Tn=this),this._call=t,this._time=e,Bn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bn())}};var Wn=function(t,n,e){var r=new Xn;return n=null==n?0:+n,r.restart(e=>{r.stop(),t(e+n)},n,e),r},Un=b("start","end","cancel","interrupt"),Qn=[],Zn=function(t,n,e,r,i,a){var o=t.__transition;if(o){if(e in o)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function a(s){var c,l,h,f;if(1!==e.state)return u();for(c in i)if((f=i[c]).name===e.name){if(3===f.state)return Wn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Wn((function(){3===e.state&&(e.state=4,e.timer.restart(o,e.delay,e.time),o(s))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(h=e.tween.length),c=0,l=-1;c<h;++c)(f=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++l]=f);r.length=l+1}}function o(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=6,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Yn((function(t){e.state=1,e.timer.restart(a,e.delay,e.time),e.delay<=t&&a(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:i,on:Un,tween:Qn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function Gn(t,n){var e=Jn(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Kn(t,n){var e=Jn(t,n);if(e.state>3)throw new Error("too late; already running");return e}function Jn(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}var te,ne=function(t,n){var e,r,i,a=t.__transition,o=!0;if(a){for(i in n=null==n?null:n+"",a)(e=a[i]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete a[i]):o=!1;o&&delete t.__transition}},ee=180/Math.PI,re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ie=function(t,n,e,r,i,a){var o,u,s;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(s=t*e+n*r)&&(e-=t*s,r-=n*s),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,s/=u),t*r<n*e&&(t=-t,n=-n,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*ee,skewX:Math.atan(s)*ee,scaleX:o,scaleY:u}};function ae(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var u=[],s=[];return a=t(a),o=t(o),function(t,r,i,a,o,u){if(t!==i||r!==a){var s=o.push("translate(",null,n,null,e);u.push({i:s-4,x:kn(t,i)},{i:s-2,x:kn(r,a)})}else(i||a)&&o.push("translate("+i+n+a+e)}(a.translateX,a.translateY,o.translateX,o.translateY,u,s),function(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(i(e)+"rotate(",null,r)-2,x:kn(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(a.rotate,o.rotate,u,s),function(t,n,e,a){t!==n?a.push({i:e.push(i(e)+"skewX(",null,r)-2,x:kn(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(a.skewX,o.skewX,u,s),function(t,n,e,r,a,o){if(t!==e||n!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:kn(t,e)},{i:u-2,x:kn(n,r)})}else 1===e&&1===r||a.push(i(a)+"scale("+e+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,u,s),a=o=null,function(t){for(var n,e=-1,r=s.length;++e<r;)u[(n=s[e]).i]=n.x(t);return u.join("")}}}var oe=ae((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?re:ie(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),ue=ae((function(t){return null==t?re:(te||(te=document.createElementNS("http://www.w3.org/2000/svg","g")),te.setAttribute("transform",t),(t=te.transform.baseVal.consolidate())?(t=t.matrix,ie(t.a,t.b,t.c,t.d,t.e,t.f)):re)}),", ",")",")");function se(t,n){var e,r;return function(){var i=Kn(this,t),a=i.tween;if(a!==e)for(var o=0,u=(r=e=a).length;o<u;++o)if(r[o].name===n){(r=r.slice()).splice(o,1);break}i.tween=r}}function ce(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var a=Kn(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:n,value:e},s=0,c=i.length;s<c;++s)if(i[s].name===n){i[s]=u;break}s===c&&i.push(u)}a.tween=i}}function le(t,n,e){var r=t._id;return t.each((function(){var t=Kn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Jn(t,r).value[n]}}var he=function(t,n){var e;return("number"==typeof n?kn:n instanceof Jt?yn:(e=Jt(n))?(n=e,yn):Ln)(t,n)};function fe(t){return function(){this.removeAttribute(t)}}function pe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function de(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=n(r=o,e)}}function me(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=n(r=o,e)}}function ge(t,n,e){var r,i,a;return function(){var o,u,s=e(this);if(null!=s)return(o=this.getAttribute(t))===(u=s+"")?null:o===r&&u===i?a:(i=u,a=n(r=o,s));this.removeAttribute(t)}}function ve(t,n,e){var r,i,a;return function(){var o,u,s=e(this);if(null!=s)return(o=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:o===r&&u===i?a:(i=u,a=n(r=o,s));this.removeAttributeNS(t.space,t.local)}}function ye(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function _e(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function we(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&_e(t,i)),e}return i._value=n,i}function be(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&ye(t,i)),e}return i._value=n,i}function xe(t,n){return function(){Gn(this,t).delay=+n.apply(this,arguments)}}function Me(t,n){return n=+n,function(){Gn(this,t).delay=n}}function ke(t,n){return function(){Kn(this,t).duration=+n.apply(this,arguments)}}function Ae(t,n){return n=+n,function(){Kn(this,t).duration=n}}function Ne(t,n){if("function"!=typeof n)throw new Error;return function(){Kn(this,t).ease=n}}function Se(t,n,e){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?Gn:Kn;return function(){var o=a(this,t),u=o.on;u!==r&&(i=(r=u).copy()).on(n,e),o.on=i}}var Ee=Pt.prototype.constructor;function Te(t){return function(){this.style.removeProperty(t)}}function Le(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function He(t,n,e){var r,i;function a(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Le(t,a,e)),r}return a._value=n,a}function Ce(t){return function(n){this.textContent=t.call(this,n)}}function qe(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Ce(r)),n}return r._value=t,r}var je=0;function Pe(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Oe(){return++je}var De=Pt.prototype;Pe.prototype=function(t){return Pt().transition(t)}.prototype={constructor:Pe,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=M(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u,s,c=r[o],l=c.length,h=a[o]=new Array(l),f=0;f<l;++f)(u=c[f])&&(s=t.call(u,u.__data__,f,c))&&("__data__"in u&&(s.__data__=u.__data__),h[f]=s,Zn(h[f],n,e,f,h,Jn(u,e)));return new Pe(a,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=N(t));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s,c=r[u],l=c.length,h=0;h<l;++h)if(s=c[h]){for(var f,p=t.call(s,s.__data__,h,c),d=Jn(s,e),m=0,g=p.length;m<g;++m)(f=p[m])&&Zn(f,n,e,m,p,d);a.push(p),o.push(s)}return new Pe(a,o,n,e)},filter:function(t){"function"!=typeof t&&(t=S(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],u=o.length,s=r[i]=[],c=0;c<u;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&s.push(a);return new Pe(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s,c=n[u],l=e[u],h=c.length,f=o[u]=new Array(h),p=0;p<h;++p)(s=c[p]||l[p])&&(f[p]=s);for(;u<r;++u)o[u]=n[u];return new Pe(o,this._parents,this._name,this._id)},selection:function(){return new Ee(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Oe(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,u=r[a],s=u.length,c=0;c<s;++c)if(o=u[c]){var l=Jn(o,n);Zn(o,t,e,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Pe(r,this._parents,t,e)},call:De.call,nodes:De.nodes,node:De.node,size:De.size,empty:De.empty,each:De.each,on:function(t,n){var e=this._id;return arguments.length<2?Jn(this.node(),e).on.on(t):this.each(Se(e,t,n))},attr:function(t,n){var e=X(t),r="transform"===e?ue:he;return this.attrTween(t,"function"==typeof n?(e.local?ve:ge)(e,r,le(this,"attr."+t,n)):null==n?(e.local?pe:fe)(e):(e.local?me:de)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=X(t);return this.tween(e,(r.local?we:be)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?oe:he;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var a=J(this,t),o=(this.style.removeProperty(t),J(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}(t,r)).on("end.style."+t,Te(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,a;return function(){var o=J(this,t),u=e(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=J(this,t)),o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u))}}(t,r,le(this,"style."+t,n))).each(function(t,n){var e,r,i,a,o="style."+n,u="end."+o;return function(){var s=Kn(this,t),c=s.on,l=null==s.value[o]?a||(a=Te(n)):void 0;c===e&&i===l||(r=(e=c).copy()).on(u,i=l),s.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,a=e+"";return function(){var o=J(this,t);return o===a?null:o===r?i:i=n(r=o,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,He(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(le(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,qe(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Jn(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==n?se:ce)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?xe:Me)(n,t)):Jn(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?ke:Ae)(n,t)):Jn(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(Ne(n,t)):Jn(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Kn(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(a,o){var u={value:o},s={value:function(){0==--i&&a()}};e.each((function(){var e=Kn(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(s)),e.on=n})),0===i&&a()}))},[Symbol.iterator]:De[Symbol.iterator]};var Ie={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Re(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Pt.prototype.interrupt=function(t){return this.each((function(){ne(this,t)}))},Pt.prototype.transition=function(t){var n,e;t instanceof Pe?(n=t._id,t=t._name):(n=Oe(),(e=Ie).time=zn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,u=r[a],s=u.length,c=0;c<s;++c)(o=u[c])&&Zn(o,t,n,c,u,e||Re(o,n));return new Pe(r,this._parents,t,n)};const{abs:ze,max:Fe,min:Xe}=Math;function Ye(t){return[+t[0],+t[1]]}function $e(t){return[Ye(t[0]),Ye(t[1])]}["w","e"].map(Ve),["n","s"].map(Ve),["n","w","e","s","nw","ne","sw","se"].map(Ve);function Ve(t){return{type:t}}const Be=t=>+t;function We(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}var Ue=function(t){return(t=We(Math.abs(t)))?t[1]:NaN},Qe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ze(t){if(!(n=Qe.exec(t)))throw new Error("invalid format: "+t);var n;return new Ge({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function Ge(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ze.prototype=Ge.prototype,Ge.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ke,Je,tr,nr,er=function(t,n){var e=We(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},rr={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>er(100*t,n),r:er,s:function(t,n){var e=We(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(Ke=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+We(t,Math.max(0,n+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},ir=function(t){return t},ar=Array.prototype.map,or=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Je=function(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?ir:(n=ar.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=n[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=n[o=(o+1)%n.length];return a.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?ir:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(ar.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var n=(t=Ze(t)).fill,e=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):rr[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===n&&"="===e)&&(p=!0,n="0",e="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===f?a:/[%p]/.test(y)?s:"",b=rr[y],x=/[defgprs%]/.test(y);function M(t){var i,a,s,f=_,M=w;if("c"===y)M=b(t)+M,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),g),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),k&&0==+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:c:"-"===h||"("===h?"":h)+f,M=("s"===y?or[8+Ke/3]:"")+M+(k&&"("===h?")":""),x)for(i=-1,a=t.length;++i<a;)if(48>(s=t.charCodeAt(i))||s>57){M=(46===s?o+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var A=f.length+t.length+M.length,N=A<d?new Array(d-A+1).join(n):"";switch(m&&p&&(t=r(N+t,N.length?d-M.length:1/0),N=""),e){case"<":t=f+t+M+N;break;case"=":t=f+N+t+M;break;case"^":t=N.slice(0,A=N.length>>1)+f+t+M+N.slice(A);break;default:t=N+f+t+M}return u(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,n){var e=h(((t=Ze(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ue(n)/3))),i=Math.pow(10,-r),a=or[8+r/3];return function(t){return e(i*t)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),tr=Je.format,nr=Je.formatPrefix;var ur=Math.sqrt(50),sr=Math.sqrt(10),cr=Math.sqrt(2);function lr(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ur?10:a>=sr?5:a>=cr?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ur?10:a>=sr?5:a>=cr?2:1)}var hr=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},fr=function(t){let n=t,e=t;function r(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}return 1===t.length&&(n=(n,e)=>t(n)-e,e=function(t){return(n,e)=>hr(t(n),e)}(t)),{left:r,center:function(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);const o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}};const pr=fr(hr),dr=pr.right;pr.left,fr((function(t){return null===t?NaN:+t})).center;var mr=dr,gr=function(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}};function vr(t){return+t}var yr=[0,1];function _r(t){return t}function wr(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function br(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=wr(i,r),a=e(o,a)):(r=wr(r,i),a=e(a,o)),function(t){return a(r(t))}}function xr(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=wr(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(n){var e=mr(t,n,1,r)-1;return a[e](i[e](n))}}function Mr(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kr(){var t,n,e,r,i,a,o=yr,u=yr,s=Hn,c=_r;function l(){var t,n,e,s=Math.min(o.length,u.length);return c!==_r&&(t=o[0],n=o[s-1],t>n&&(e=t,t=n,n=e),c=function(e){return Math.max(t,Math.min(n,e))}),r=s>2?xr:br,i=a=null,h}function h(n){return isNaN(n=+n)?e:(i||(i=r(o.map(t),u,s)))(t(c(n)))}return h.invert=function(e){return c(n((a||(a=r(u,o.map(t),kn)))(e)))},h.domain=function(t){return arguments.length?(o=Array.from(t,vr),l()):o.slice()},h.range=function(t){return arguments.length?(u=Array.from(t),l()):u.slice()},h.rangeRound=function(t){return u=Array.from(t),s=gr,l()},h.clamp=function(t){return arguments.length?(c=!!t||_r,l()):c!==_r},h.interpolate=function(t){return arguments.length?(s=t,l()):s},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,l()}}function Ar(){return kr()(_r,_r)}function Nr(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Sr(t,n,e,r){var i,a=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=ur?i*=10:a>=sr?i*=5:a>=cr&&(i*=2),n<t?-i:i}(t,n,e);switch((r=Ze(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ue(n)/3)))-Ue(Math.abs(t)))}(a,o))||(r.precision=i),nr(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Ue(n)-Ue(t))+1}(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Ue(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return tr(r)}function Er(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,a,o,u=-1;if(e=+e,(t=+t)===(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(o=lr(t,n,e))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),n=Math.floor(n/o),a=new Array(i=Math.ceil(n-t+1));++u<i;)a[u]=(t+u)*o;else for(o=-o,t=Math.ceil(t*o),n=Math.floor(n*o),a=new Array(i=Math.ceil(n-t+1));++u<i;)a[u]=(t+u)/o;return r&&a.reverse(),a}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Sr(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,a=n(),o=0,u=a.length-1,s=a[o],c=a[u],l=10;for(c<s&&(i=s,s=c,c=i,i=o,o=u,u=i);l-- >0;){if((i=lr(s,c,e))===r)return a[o]=s,a[u]=c,n(a);if(i>0)s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Tr(){var t=Ar();return t.copy=function(){return Mr(t,Tr())},Nr.apply(t,arguments),Er(t)}const Lr=Math.PI,Hr=2*Lr,Cr=Hr-1e-6;function qr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function jr(){return new qr}qr.prototype=jr.prototype={constructor:qr,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,u=e-t,s=r-n,c=a-t,l=o-n,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(h>1e-6)if(Math.abs(l*u-s*c)>1e-6&&i){var f=e-a,p=r-o,d=u*u+s*s,m=f*f+p*p,g=Math.sqrt(d),v=Math.sqrt(h),y=i*Math.tan((Lr-Math.acos((d+h-m)/(2*g*v)))/2),_=y/v,w=y/g;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(n+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+w*u)+","+(this._y1=n+w*s)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,a){t=+t,n=+n,a=!!a;var o=(e=+e)*Math.cos(r),u=e*Math.sin(r),s=t+o,c=n+u,l=1^a,h=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),e&&(h<0&&(h=h%Hr+Hr),h>Cr?this._+="A"+e+","+e+",0,1,"+l+","+(t-o)+","+(n-u)+"A"+e+","+e+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):h>1e-6&&(this._+="A"+e+","+e+",0,"+ +(h>=Lr)+","+l+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var Pr=jr,Or=(Array.prototype.slice,function(t){return function(){return t}});function Dr(t){this._context=t}Dr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Ir=function(t){return new Dr(t)};function Rr(t){return t[0]}function zr(t){return t[1]}var Fr=function(t,n){var e=Or(!0),r=null,i=Ir,a=null;function o(o){var u,s,c,l=(o=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(o)).length,h=!1;for(null==r&&(a=i(c=Pr())),u=0;u<=l;++u)!(u<l&&e(s=o[u],u,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(s,u,o),+n(s,u,o));if(c)return a=null,c+""||null}return t="function"==typeof t?t:void 0===t?Rr:Or(t),n="function"==typeof n?n:void 0===n?zr:Or(n),o.x=function(n){return arguments.length?(t="function"==typeof n?n:Or(+n),o):t},o.y=function(t){return arguments.length?(n="function"==typeof t?t:Or(+t),o):n},o.defined=function(t){return arguments.length?(e="function"==typeof t?t:Or(!!t),o):e},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o};function Xr(t){return((t=Math.exp(t))+1/t)/2}(function t(n,e,r){function i(t,i){var a,o,u=t[0],s=t[1],c=t[2],l=i[0],h=i[1],f=i[2],p=l-u,d=h-s,m=p*p+d*d;if(m<1e-12)o=Math.log(f/c)/n,a=function(t){return[u+t*p,s+t*d,c*Math.exp(n*t*o)]};else{var g=Math.sqrt(m),v=(f*f-c*c+r*m)/(2*c*e*g),y=(f*f-c*c-r*m)/(2*f*e*g),_=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(y*y+1)-y);o=(w-_)/n,a=function(t){var r,i=t*o,a=Xr(_),l=c/(e*g)*(a*(r=n*i+_,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[u+l*p,s+l*d,c*a/Xr(n*i+_)]}}return a.duration=1e3*o*n/Math.SQRT2,a}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i})(Math.SQRT2,2,4);function Yr(t,n,e){this.k=t,this.x=n,this.y=e}Yr.prototype={constructor:Yr,scale:function(t){return 1===t?this:new Yr(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Yr(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Yr(1,0,0);Yr.prototype;function $r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vr=function(){function t(n,e,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.lowData=n,this.highData=e,this.indicator=r,this.element=document.getElementById("line-chart"),this.createChart()}var n,e,r;return n=t,(e=[{key:"createChart",value:function(){this.width=650,this.height=450,this.margin={top:20,right:75,bottom:50,left:50},this.element.innerHTML="",this.svg=Ot(this.element).append("svg").attr("width",this.width).attr("height",this.height),this.plot=this.svg.append("g").attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")")),this.createScales(),this.addAxes(),this.addLine(this.highData,"rgb(190, 0, 0"),this.addLine(this.lowData,"rgb(0, 0, 99")}},{key:"createScales",value:function(){var t,n=this.lowData.map((function(t){return t.avg})),e=this.highData.map((function(t){return t.avg})),r=n.concat(e),i=function(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}(r),a=function(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}(r),o=this.margin;t=a>=0?[a-a/20,i+i/20]:[a+a/20,i+i/20],this.xScale=Tr().range([0,this.width-o.right]).domain([1950,2100]),this.yScale=Tr().range([this.height-(o.top+o.bottom),0]).domain(t)}},{key:"addAxes",value:function(){var t,n=this.margin,e=d(3,t).scale(this.xScale).ticks(15).tickFormat(tr("d")),r=function(t){return d(4,t)}().scale(this.yScale);this.plot.append("g").attr("transform","translate(0, ".concat(this.height-(n.top+n.bottom),")")).call(e),this.svg.append("text").attr("class","x-axis").attr("x",this.width-335).attr("y",this.height-12).style("text-anchor","middle").text("Year"),this.plot.append("g").call(r),this.svg.append("text").attr("class","y-axis").attr("transform","rotate(-90)").attr("x",this.width-870).attr("y",this.height-430).style("color","orange").style("text-anchor","middle").text(function(t){switch(t){case"average_high_temperature":return"Avg High Temperature";case"average_low_temperature":return"Avg Low Temperature";case"total_precipitation":return"Total Precipitation";case"extreme_precipitation_events":return"Extreme Precipitation Events";case"extreme_cold_events":return"Extreme Cold Events";case"extreme_heat_events":return"Extreme Heat Events";case"heat_wave_incidents":return"Heat Wave Incidents";case"heat_wave_duration_index":return"Heat Wave Duration Index";case"dry_spells":return"Dry Spells";case"diurnal_temperature_range":return"Diurnal Temperature Range";case"frost_days":return"Frost Days";case"max_high_temperature":return"Max High Temperature";case"min_low_temperature":return"Min Low Temperature"}}(this.indicator))}},{key:"addLine",value:function(t,n){var e=this,r=t.map((function(t){t.avg}));r<0&&(r=0);var i=Fr().x((function(t){return e.xScale(t.year)})).y((function(t){return e.yScale(t.avg)})),a=this.plot.append("path").datum(t).classed("line",!0).attr("fill","none").attr("stroke",n).attr("d",i).transition().duration(5e3).ease(Be).attrTween("stroke-dasharray",(function(){var t=a.node().getTotalLength();return Hn("0,".concat(t),"".concat(t,",").concat(t))}))}}])&&$r(n.prototype,e),r&&$r(n,r),t}();function Br(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return Wr(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Wr(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function Wr(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".form-nci"),n=document.querySelector("#submit"),e=[],u=[];s(1,"average_high_temperature"),t.addEventListener("submit",(function(t){t.preventDefault(),e=[],u=[];var n,r=new FormData(t.target),i={},a=Br(r.keys());try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=r.get(o)}}catch(t){a.e(t)}finally{a.f()}var c=i.city,l=i.indicator;s(c,l)}));var s=function(t,s){r("loading"),n.disabled=!0,function(t,n){return fetch("https://app.climate.azavea.com/api/climate-data/".concat(t,"/historical/indicator/").concat(n,"/"),a).then((function(t){return t.json()})).then((function(t){return t})).catch(i)}(t,s).then((function(i){var a=i.city.geometry.coordinates;Object.keys(i.data).forEach((function(t){e.push(Object.assign({},{year:t},i.data[t])),u.push(Object.assign({},{year:t},i.data[t]))})),o(t,"RCP45",s).then((function(i){Object.keys(i.data).forEach((function(t){e.push(Object.assign({},{year:t},i.data[t]))})),o(t,"RCP85",s).then((function(t){Object.keys(t.data).forEach((function(n){u.push(Object.assign({},{year:n},t.data[n]))})),initMap(a[0],a[1]),new Vr(e,u,s),r(s),setTimeout((function(){return n.disabled=!1}),5e3)}))}))}))};window.initMap=function(t,n){void 0!==t&&-75.4999!==t||(t=-73.990286),void 0!==n&&43.00035!==n||(n=40.736241);var e=document.querySelector("#map");new google.maps.Map(e,{center:{lat:n,lng:t},zoom:10,mapTypeId:google.maps.MapTypeId.SATELLITE,disableDefaultUI:!0})};var c=document.querySelector(".modal-open-container"),l=document.querySelector(".modal-overlay"),h=document.querySelector(".modal-close");c.addEventListener("click",(function(){l.style.display="block"})),h.addEventListener("click",(function(){l.style.display="none"})),window.addEventListener("click",(function(t){t.target===l&&(l.style.display="none")}))}))}});
//# sourceMappingURL=main.js.map